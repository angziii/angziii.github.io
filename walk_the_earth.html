<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walk the Earth - angzi's adventures</title>
    <meta name="description" content="Map of angzi's travels and adventures around the world.">
    <meta property="og:title" content="Walk the Earth - angzi's adventures">
    <meta property="og:description" content="Map of angzi's travels and adventures around the world.">
    <meta property="og:image" content="https://angziii.github.io/angzi.webp">
    <meta property="og:url" content="https://angziii.github.io/walk_the_earth.html">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="background"></div>

    <nav class="top-nav">
        <ul>
            <li><a href="index.html" class="hover-float hover-pop">About Me</a></li>
            <li><a href="research.html" class="hover-float hover-pop">Research</a></li>
            <li><a href="crafts.html" class="hover-float hover-pop">Crafts</a></li>
            <li><a href="walk_the_earth.html" class="active hover-pop">Walk the earth</a></li>
        </ul>
    </nav>
    <main class="map-hero">
        <div class="map-container" id="map">
            <!-- Map will be initialized here -->
        </div>
    </main>

    <!-- Leaflet JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="locations.js"></script>
    <script src="tracks.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize the map centered on a reasonable default
            const map = L.map('map', {
                scrollWheelZoom: false,
                attributionControl: false
            }).setView([25, 115], 4);

            // Add a beautiful tile layer (CartoDB Voyager)
            L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
                maxZoom: 19
            }).addTo(map);

            // Icon mapping
            const icons = {
                flight: '‚úàÔ∏è',
                hiking: '‚õ∞Ô∏è',
                study: 'üéì',
                travel: 'üìç',
                drive: 'üöó'
            };

            const markers = [];

            // Add markers from MAP_DATA
            MAP_DATA.forEach(point => {
                const iconEmoji = icons[point.category] || 'üìç';
                const customIcon = L.divIcon({
                    html: `<div style="font-size: 16px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));">${iconEmoji}</div>`,
                    className: 'custom-div-icon',
                    iconSize: [20, 20],
                    iconAnchor: [10, 18]
                });

                const marker = L.marker([point.lat, point.lng], { icon: customIcon })
                    .bindPopup(`<strong>${point.name}</strong><br>${point.layer}`)
                    .addTo(map);

                markers.push(marker);
            });

            // Auto-fit bounds if we have markers
            if (markers.length > 0) {
                const group = new L.featureGroup(markers);
                map.fitBounds(group.getBounds().pad(0.1));
            }

            // Render Tracks from TRACK_DATA
            if (typeof TRACK_DATA !== 'undefined') {
                TRACK_DATA.forEach(track => {
                    if (track.data) {
                        L.geoJSON(track.data, {
                            style: function (feature) {
                                return {
                                    color: track.color || '#3388ff',
                                    weight: 4,
                                    opacity: 0.7
                                };
                            }
                        }).bindPopup(track.name).addTo(map);
                    }
                });
            }
        });
    </script>

</body>

</html>